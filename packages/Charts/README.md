# Charts

Charts is a [package](https://datagrok.ai/help/develop/develop#packages) for the
[Datagrok](https://datagrok.ai) platform. It provides visualizations built using
the [ECharts](https://echarts.apache.org/en/index.html) library.

## Timelines

This viewer displays the flow of events over time. `Timelines` is often used in life sciences,
in particular, for clinical data visualization (see a usage example in the
[Clinical Case](https://github.com/datagrok-ai/public/tree/master/packages/ClinicalCase#timelines) application).

![](./img/timelines.gif)

### Properties

```js
grok.shell.v.addViewer(DG.VIEWER.TIMELINES, {
  splitByColumnName: "USUBJID",  // Subject identifier (a categorical column displayed on the Y axis)
  startColumnName: "AESTDY",     // Start date of event (an integer/datetime column)
  endColumnName: "AEENDY",       // End date of event (an integer/datetime column)
  colorByColumnName: "AETERM",   // Color criterion (a categorical column with non-unique values to visually group the events)
  eventColumnName: "AETERM",     // Optional (used when `showEventInTooltip` is set to true)
  showEventInTooltip: false,     // Switches between two tooltip modes: (1) the general number of co-occurring events and (2) the event details
  dateFormat: "",                // Optional (used when the start and/or end are represented as datetime).
                                 // Formats: '{yyyy}-{MM}-{dd}', '{M}/{d}/{yyyy}', '{MMM} {d}', '{dd}', '{d}'
  axisPointer: "shadow",         // Axis pointer style ('cross' | 'line' | 'shadow' | 'none')
  showZoomSliders: true,         // Zoom sliders visibility control
  marker: "circle",              // Marker shape ('circle' | 'rect' | 'ring' | 'diamond')
  markerSize: 6,                 // Marker size (the width and height for rectangular shapes, the diameter for circular shapes)
  markerPosition: "main line",   // Marker position ('main line' | 'above main line' | 'scatter')
                                 // Moves all points (non-prolonged events, events without either start or end date, events with the duration
                                 // that converts to a value less than that of the marker size) to a given position on the Y axis within one subject.
                                 // Used for a large number of overlapping events. The 'scatter' option shifts data points up and down in turn
  lineWidth: 3,                  // Line width (the value is not applied to markers)
});
```

It is possible to choose the above options in the property panel and then obtain
a code snippet that adds a new viewer with identical settings into the view. It
is generated by the [DevTools](https://github.com/datagrok-ai/public/tree/master/packages/DevTools)
plugin whenever you call the viewer context menu command `To Script | To JavaScript`.

### Column selection heuristics

The `Timelines` viewer can choose its parameters by [SDTM](https://www.cdisc.org/standards/foundational/sdtm)
vocabulary. If you are working with a dataset representing an SDTM domain, the
algorithm will first try to match the column names based on the naming
conventions of this standard. In other cases, the columns will be selected
according to the data type and such column statistics as the number of unique
categories.

## Radar

Radar charts are used on multivariate data to plot groups of values over several common variables.
Demo dataset: https://dev.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/beer.csv

![](./img/radar.gif)

## Chord

Status: `experimental`
Demo dataset: https://dev.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/energy_uk.csv

![](./img/chord.gif)

See also the `Chord` viewer in the [Viewers](https://github.com/datagrok-ai/public/tree/master/packages/Viewers) package.

## Sankey

Status: `experimental`
Demo dataset: https://dev.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/energy_uk.csv

![](./img/sankey.gif)

## Sunburst

Status: `experimental`
Demo dataset: https://dev.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/demog.csv

![](./img/sunburst.gif)

## TreeMap

Status: `experimental`
Demo dataset: https://dev.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/demog.csv

![](./img/tree-map.gif)

## TreeViewer

Status: `experimental`
Demo dataset: https://dev.datagrok.ai/f/Demo.TestJobs.Files.DemoFiles/demog.csv

![](./img/tree-viewer.gif)

### Properties

```js
{
  edgeShape: "curve",       // 'curve' | 'polyline'
  expandAndCollapse: true,  //
  layout: "orthogonal",     // 'orthogonal' | 'radial'
  orient: "LR",             // 'LR' | 'RL' | 'TB' | 'BT'
  symbol: "emptyCircle",    // Tree node symbol shape
  symbolSize: 7,            // Tree node symbol size
}
```

## WordCloud

![](./img/word-cloud.gif)

## Common properties

```js
{
  top: '5px',
  left: '5px',
  bottom: '5px',
  right: '5px',
  animationDuration: 500,
  animationDurationUpdate: 750,
}
```

See also:
  - [ECharts](https://echarts.apache.org/en/index.html)
  - [Viewers](https://datagrok.ai/help/visualize/viewers)
  - [How to Develop Custom Viewers](https://datagrok.ai/help/develop/how-to/develop-custom-viewer)
